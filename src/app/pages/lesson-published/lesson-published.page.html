<app-header [title]="lesson.title"></app-header>

<ion-content fullscreen class="dark-container">
  <ion-grid class="container-grid">
    <ion-row justify-content-center align-items-center>
      <ion-col size="12" ion-text-center>
        <div class="container" style="height: 100%">
          <div class="lesson-header">
            <div class="title-block">
              <h5 class="sub-title">{{ lesson.program_title }}</h5>

              <div class="lesson-img">
                <img
                  src="{{ lesson.program_image }}"
                  alt="web-rf"
                  *ngIf="lesson.program_image != ''"
                />
              </div>
            </div>
            <p class="lesson-title">{{ lesson.title }}</p>

            <ion-thumbnail class="player">
              <iframe
                [src]="trustedVideoUrl"
                frameborder="0"
                allowfullscreen
                *ngIf="trustedVideoUrl != ''"
              ></iframe>
            </ion-thumbnail>

            <ion-item class="lesson-title">
              <ion-label class="lesson-label" *ngIf="+lesson.type_id == 1"
                >Выбор правильного ответа</ion-label
              >
              <ion-label class="lesson-label" *ngIf="+lesson.type_id == 2"
                >Необходимо отсканировать QR-код</ion-label
              >
              <ion-label class="lesson-label" *ngIf="+lesson.type_id == 3"
                >Строка для ответа</ion-label
              >
              <ion-label class="lesson-label" *ngIf="+lesson.type_id == 4"
                >Загрузить файл</ion-label
              >
              <ion-label class="lesson-label" *ngIf="+lesson.type_id == 5"
                >Активность</ion-label
              >
            </ion-item>
            <p class="sub-title" *ngIf="lesson.description != ''">
              {{ lesson.description }}
            </p>
            <h3
              class="subtitle"
              *ngIf="+lesson.type_id == 1 || +lesson.type_id == 3"
            >
              {{ lesson.question }}
            </h3>
            <p *ngIf="+lesson.type_id == 3  && !lesson.exist">
              <ion-input
                type="text"
                class="input-ball"
                name="answer"
                [(ngModel)]="answer"
                placeholder="Ответ на вопрос"
              ></ion-input>
            </p>
          </div>
          <div
            class="button-wrapper"
            *ngFor="let answer of lesson.answers"
            style="width: auto; min-width: 50%; display: inline-block"
          >
            <ion-button
              class="button register-button"
              style="
                font-size: 18px;
                --background: #0361aa;
                --color: #fff;
                margin: 10px 5%;
                width: 90%;
                white-space: normal;
              "
              (click)="doAnswer(answer.idx)"
              *ngIf="+lesson.type_id != 3 && !lesson.exist"
              >{{ answer.title }}</ion-button
            >
          </div>
          <div
            class="button-wrapper"
            *ngIf="(+lesson.type_id == 2 || +lesson.type_id == 3) && !lesson.exist"
          >
            <ion-button
              class="button"
              expand="block"
              style="
                font-size: 18px;
                --width: 80%;
                --background: #0361aa;
                --color: #fff;
                margin-top: 30px;
                margin-bottom: 210px;
              "
              (click)="startTask()"
            >
              Применить
            </ion-button>
            <!--ion-button
                                class="button"
                                expand="block"
                                style="font-size: 18px; --width: 80%; --background: #0361aa; --color: #fff; margin-top: 30px; margin-bottom: 210px;" (click)="startTask()">
                          Редактировать
                        </ion-button-->
          </div>
          <div
            class="button-wrapper"
            *ngIf="+lesson.type_id == 4 && !lesson.exist"
          >
            <ion-button
              class="button"
              expand="block"
              style="
                font-size: 18px;
                --width: 80%;
                --background: #0361aa;
                --color: #fff;
                margin-top: 30px;
              "
              (click)="uploadPhoto()"
            >
              Загрузить фото
            </ion-button>
          </div>
          <div
            class="button-wrapper"
            *ngIf="+lesson.type_id == 4 && !lesson.exist"
          >
            <ion-button
              class="button"
              expand="block"
              style="
                font-size: 18px;
                --width: 80%;
                --background: #0361aa;
                --color: #fff;
                margin-top: 30px;
              "
              (click)="uploadDoc()"
            >
              Загрузить документ
            </ion-button>
          </div>
          <h2 class="ion-text-center exist" *ngIf="lesson.exist">Выполнено</h2>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
